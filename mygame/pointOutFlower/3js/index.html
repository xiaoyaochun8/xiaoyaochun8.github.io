<!DOCTYPE html>
<html lang="en">
    <head>
        <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
        <meta charset="utf-8">
        <title>指点生花</title>
        <style>
            body { margin: 0; }
        </style>
    </head>
    <body>
        <script async src="https://unpkg.com/es-module-shims@1.3.6/dist/es-module-shims.js"></script>
        
        <script type="importmap">
        {
            "imports": {
              "three": "https://unpkg.com/three@0.162.0/build/three.module.js"
            }
        }
        </script>
        <!--<script type="importmap">
        {
            "imports":{
                "three":"./three.module.js"
            }
        }
        </script>-->
        
        <script type="module">
import * as THREE from 'three';
console.log('Threejs-Version: '+THREE.REVISION);
//scene
const scene = new THREE.Scene();
//camera
const camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );
camera.position.x = 0;
camera.position.y = 0;
camera.position.z = 300;
camera.lookAt(scene.position);
//renderer
const renderer = new THREE.WebGLRenderer();
renderer.setSize( window.innerWidth, window.innerHeight );
document.body.appendChild( renderer.domElement );

function animate() {
    requestAnimationFrame( animate );
    for(var i in sprites){
        sprites[i].rotation.x += 0.01;
        sprites[i].rotation.y += 0.01;
    }
    renderer.render( scene, camera );
};
animate();

var mouse = new THREE.Vector2();
var sprites = [];
function onMouseClick( event ) {
    mouse.x = ( event.clientX / window.innerWidth ) * 2 - 1;
    mouse.y = - ( event.clientY / window.innerHeight ) * 2 + 1;
    var geometry = new THREE.BoxGeometry( 10, 30, 30);
    var material = new THREE.MeshNormalMaterial();
    var cube = new THREE.Mesh( geometry, material );
    var posZ = Math.random();
    cube.position.x = mouse.x * window.innerWidth/4;
    cube.position.y = mouse.y * window.innerHeight/4;
    cube.position.z = 0;
    scene.add( cube );
    sprites.push(cube);
}
window.addEventListener( 'click', onMouseClick, false );
        </script>
    </body>
</html>